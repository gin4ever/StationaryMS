@model eProject.Models.Users

@{
    ViewData["Title"] = "Profile";
    Layout = "~/Views/Shared/_Layout_User.cshtml";
}

@using Newtonsoft.Json.Linq
@using Newtonsoft.Json
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@{
    string json = HttpContextAccessor.HttpContext.Session.GetString("cart");
    string json_user_detail = HttpContextAccessor.HttpContext.Session.GetString("user_detail");
    Users user = null;
    List<CartItem> listCart = new List<CartItem>();
    decimal total_money = 0;
    if (json != null)
    {
        JArray jsonResponse = JArray.Parse(json);

        foreach (var item in jsonResponse)
        {
            JObject cartResult = (JObject)item;
            listCart.Add(JsonConvert.DeserializeObject<CartItem>(cartResult.ToString()));
        }
    }
    if (json_user_detail != null)
    {
        JObject jsonResponse = JObject.Parse(json_user_detail);
        user = JsonConvert.DeserializeObject<Users>(json_user_detail.ToString());
    }
}

<h1>Welcome @Html.DisplayFor(model => model.Fullname)</h1>

<div class="wrapper">
    <div class="dashboard-group">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="user-dt">
                        <h4>Welcome @Html.DisplayFor(model => model.Fullname)</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="">
        <div class="container">
            <div class="row">
                <div class="col-lg-9 col-md-8">
                    <div class="dashboard-right">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="main-title-tab">
                                    <h4><i class="uil uil-apps"></i>Overview</h4>
                                </div>
                                <div class="welcome-text">
                                    <h2>@Html.DisplayFor(model => model.Fullname)</h2>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="pdpt-bg">
                                    <div class="pdpt-title">
                                        <h4>Username</h4>
                                    </div>
                                    <div class="ddsh-body">
                                        <h2> @Html.DisplayFor(model => model.Username)</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="pdpt-bg">
                                    <div class="pdpt-title">
                                        <h4>Phone</h4>
                                    </div>
                                    <div class="ddsh-body">
                                        <h2>@Html.DisplayFor(model => model.Phone)</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="pdpt-bg">
                                    <div class="pdpt-title">
                                        <h4>Email</h4>
                                    </div>
                                    <div class="ddsh-body">
                                        <h2>@Html.DisplayFor(model => model.Email)</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="pdpt-bg">
                                    <div class="pdpt-title">
                                        <h4>Address</h4>
                                    </div>
                                    <div class="ddsh-body">
                                        <h2>@Html.DisplayFor(model => model.Address)</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="pdpt-bg">
                                    <div class="pdpt-title">
                                        <h4>Role ID</h4>
                                    </div>
                                    <div class="ddsh-body">
                                        <h2>@Html.DisplayFor(model => model.Role_Id)</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="pdpt-bg">
                                    <div class="pdpt-title">
                                        <h4>Department ID</h4>
                                    </div>
                                    <div class="ddsh-body">
                                        <h2>@Html.DisplayNameFor(model => model.Department_Id)</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="pdpt-bg">
                                    <div class="pdpt-title">
                                        <h4>Images</h4>
                                    </div>
                                    <div class="ddsh-body">
                                        <img src="~/@Url.Content(Model.Images)" width="100" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12">
                                <form action="@Url.Action("ChangePassword", "User")" method="post">
                                    <input type="hidden" name="id" value="@Html.DisplayNameFor(model => model.User_Id)" />
                                    <div class="pdpt-bg">
                                        <div class="pdpt-title">
                                            <h4>Update information</h4>
                                        </div>
                                        <div class="wllt-body pb-2">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>New password</label>
                                                            <input type="password" name="password" value="" class="form-control" />
                                                        </div>
                                                        <div class="form-group">
                                                            <label asp-for="Images" class="control-label"></label>
                                                            <p></p>
                                                            <img src="~/@Url.Content(Model.Images)" width="100" />
                                                            <input type="file" name="file" id="file" asp-for="Images" class="form-control" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <button type="submit" class="btn btn-success">Submit</button>
                                                </div>
                                            </div>
                                        </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>